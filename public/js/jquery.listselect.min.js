(function(a){a.fn.listselect=function(c){c=a.extend({size:10,listTitle:"All",selectedTitle:"Selected"},c);return this.each(function(){var d=a('<div style="margin-right: 5px; float: left; width: 200px;"></div>');c.listTitle&&c.listTitle!=""&&d.append("<strong>"+c.listTitle+"</strong>");var f=a('<div style="float: left; width: 200px;"></div>');c.selectedTitle&&c.selectedTitle!=""&&f.append("<strong>"+c.selectedTitle+"</strong>");var b=a(this);d.insertBefore(b);f.insertAfter(d);b.remove();var i=a('<div style="clear: both;"></div>');
i.insertAfter(f);var e=a("<select></select>"),g=null;if(b.attr("selected"))g=b.attr("selected").split(",");var j=b.attr("name"),k=j.replace("[]","");b.attr("name","");b.attr("id","");b.css("width","100%");e.css("width","100%");e.html(b.html());b.html("");b.attr("size",c.size);e.attr("size",c.size);d.append(e);f.append(b);e.bind("click",function(){var h=a(this).find("option[value='"+a(this).val()+"']");if(h.length>0){var l=a('<input type="checkbox" style="display: none" checked="checked" name="'+j+
'" id="listselect_'+k+"_"+a(this).val()+'" value="'+a(this).val()+'" />');h.remove();b.append(h);i.append(l);b.val("");e.val("")}});b.bind("click",function(){var h=a(this).find("option[value='"+a(this).val()+"']");if(h.length>0){var l=a("#listselect_"+k+"_"+a(this).val());h.remove();e.append(h);l.remove();b.val("");e.val("")}});i.append(a('<input type="checkbox" style="display: none" name="'+j+'">'));if(g!=null&&g.length>0)for(d=0;d<g.length;d++){f=e.find("option[value='"+g[d]+"']");if(f.length>0){var m=
a('<input type="checkbox" style="display: none" checked="checked" name="'+j+'" id="listselect_'+k+"_"+g[d]+'" value="'+g[d]+'" />');f.remove();b.append(f);i.append(m)}}b.val("");e.val("")})}})(jQuery);